{"ast":null,"code":"import _toConsumableArray from\"/Users/mikenezzer/Desktop/vinyl_vault/Vinyl-Vault/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/mikenezzer/Desktop/vinyl_vault/Vinyl-Vault/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mikenezzer/Desktop/vinyl_vault/Vinyl-Vault/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mikenezzer/Desktop/vinyl_vault/Vinyl-Vault/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import{useState,useEffect}from\"react\";import{Route,Switch,useHistory}from\"react-router-dom\";import Home from\"./screens/Home/Home.jsx\";import Albums from\"./screens/Albums/Albums.jsx\";import AlbumCreate from\"./screens/AlbumCreate/AlbumCreate.jsx\";import SignIn from\"./screens/SignIn/SignIn.jsx\";import SignUp from\"./screens/SignUp/SignUp.jsx\";import AlbumEdit from\"./screens/AlbumEdit/AlbumEdit.jsx\";import AlbumDetail from\"./screens/AlbumDetail/AlbumDetail.jsx\";import{verifyUser,loginUser,registerUser,removeToken}from\"./services/auth.js\";import{getAllAlbums,createAlbum,deleteAlbum,putAlbum}from\"./services/albums\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),albums=_useState2[0],setAlbums=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var history=useHistory();useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return verifyUser();case 2:user=_context.sent;user?setUser(user):setUser(null);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[]);useEffect(function(){var fetchAlbums=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var allAlbums;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAllAlbums();case 2:allAlbums=_context2.sent;setAlbums(allAlbums);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchAlbums(){return _ref2.apply(this,arguments);};}();fetchAlbums();},[]);var handleAlbumCreate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(albumData){var newAlbum;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return createAlbum(albumData);case 2:newAlbum=_context3.sent;setAlbums(function(prev){return[].concat(_toConsumableArray(prev),[newAlbum]);});history.push(\"/albums\");case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAlbumCreate(_x){return _ref3.apply(this,arguments);};}();var handleAlbumDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return deleteAlbum(id);case 2:setAlbums(function(prev){return prev.filter(function(album){return album.id!==Number(id);});});history.push(\"/albums\");case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleAlbumDelete(_x2){return _ref4.apply(this,arguments);};}();var handleAlbumUpdate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id,albumData){var updateAlbum;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return putAlbum(id,albumData);case 2:updateAlbum=_context5.sent;setAlbums(function(prev){return prev.map(function(album){return album.id===Number(id)?updateAlbum:album;});});history.push(\"/albums\");case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleAlbumUpdate(_x3,_x4){return _ref5.apply(this,arguments);};}();var handleLogin=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(loginData){var userData;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return loginUser(loginData);case 2:userData=_context6.sent;setUser(userData);history.push(\"/albums\");case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function handleLogin(_x5){return _ref6.apply(this,arguments);};}();var handleRegister=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(registerData){var userData;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return registerUser(registerData);case 2:userData=_context7.sent;setUser(userData);history.push(\"/albums\");case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRegister(_x6){return _ref7.apply(this,arguments);};}();var handleLogout=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setUser(null);localStorage.removeItem(\"authToken\");removeToken();history.push(\"/\");case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function handleLogout(){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/sign-up\",children:/*#__PURE__*/_jsx(SignUp,{handleRegister:handleRegister,user:user,handleLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/sign-in\",children:/*#__PURE__*/_jsx(SignIn,{user:user,handleLogout:handleLogout,handleLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/add-album\",children:/*#__PURE__*/_jsx(AlbumCreate,{user:user,handleLogout:handleLogout,handleAlbumCreate:handleAlbumCreate})}),/*#__PURE__*/_jsx(Route,{path:\"/albums/:id/edit\",children:/*#__PURE__*/_jsx(AlbumEdit,{user:user,albums:albums,handleAlbumUpdate:handleAlbumUpdate,handleLogout:handleLogout,handleAlbumDelete:handleAlbumDelete})}),/*#__PURE__*/_jsx(Route,{path:\"/albums/:id\",children:/*#__PURE__*/_jsx(AlbumDetail,{user:user,handleLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/albums\",children:/*#__PURE__*/_jsx(Albums,{user:user,handleLogout:handleLogout,albums:albums})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Home,{user:user,handleLogout:handleLogout})})]})});}export default App;","map":{"version":3,"sources":["/Users/mikenezzer/Desktop/vinyl_vault/Vinyl-Vault/client/src/App.js"],"names":["useState","useEffect","Route","Switch","useHistory","Home","Albums","AlbumCreate","SignIn","SignUp","AlbumEdit","AlbumDetail","verifyUser","loginUser","registerUser","removeToken","getAllAlbums","createAlbum","deleteAlbum","putAlbum","App","albums","setAlbums","user","setUser","history","fetchUser","fetchAlbums","allAlbums","handleAlbumCreate","albumData","newAlbum","prev","push","handleAlbumDelete","id","filter","album","Number","handleAlbumUpdate","updateAlbum","map","handleLogin","loginData","userData","handleRegister","registerData","handleLogout","localStorage","removeItem"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport { useState, useEffect } from \"react\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\nimport Home from \"./screens/Home/Home.jsx\";\nimport Albums from \"./screens/Albums/Albums.jsx\";\nimport AlbumCreate from \"./screens/AlbumCreate/AlbumCreate.jsx\";\nimport SignIn from \"./screens/SignIn/SignIn.jsx\";\nimport SignUp from \"./screens/SignUp/SignUp.jsx\";\nimport AlbumEdit from \"./screens/AlbumEdit/AlbumEdit.jsx\";\nimport AlbumDetail from \"./screens/AlbumDetail/AlbumDetail.jsx\";\nimport {\n  verifyUser,\n  loginUser,\n  registerUser,\n  removeToken,\n} from \"./services/auth.js\";\nimport {\n  getAllAlbums,\n  createAlbum,\n  deleteAlbum,\n  putAlbum,\n} from \"./services/albums\";\n\nfunction App() {\n  const [albums, setAlbums] = useState([]);\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const user = await verifyUser();\n      user ? setUser(user) : setUser(null);\n    };\n    fetchUser();\n  }, []);\n\n  useEffect(() => {\n    const fetchAlbums = async () => {\n      const allAlbums = await getAllAlbums();\n      setAlbums(allAlbums);\n    };\n    fetchAlbums();\n  }, []);\n\n  const handleAlbumCreate = async (albumData) => {\n    const newAlbum = await createAlbum(albumData);\n    setAlbums((prev) => [...prev, newAlbum]);\n    history.push(\"/albums\");\n  };\n\n  const handleAlbumDelete = async (id) => {\n    await deleteAlbum(id);\n\n    setAlbums((prev) =>\n      prev.filter((album) => {\n        return album.id !== Number(id);\n      })\n    );\n    history.push(\"/albums\");\n  };\n\n  const handleAlbumUpdate = async (id, albumData) => {\n    const updateAlbum = await putAlbum(id, albumData);\n    setAlbums((prev) =>\n      prev.map((album) => {\n        return album.id === Number(id) ? updateAlbum : album;\n      })\n    );\n    history.push(\"/albums\");\n  };\n\n  const handleLogin = async (loginData) => {\n    const userData = await loginUser(loginData);\n    setUser(userData);\n    history.push(\"/albums\");\n  };\n\n  const handleRegister = async (registerData) => {\n    const userData = await registerUser(registerData);\n    setUser(userData);\n    history.push(\"/albums\");\n  };\n\n  const handleLogout = async () => {\n    setUser(null);\n    localStorage.removeItem(\"authToken\");\n    removeToken();\n    history.push(\"/\");\n  };\n\n  return (\n    <div className=\"App\">\n      <Switch>\n        <Route path=\"/sign-up\">\n          <SignUp\n            handleRegister={handleRegister}\n            user={user}\n            handleLogout={handleLogout}\n          />\n        </Route>\n\n        <Route path=\"/sign-in\">\n          <SignIn\n            user={user}\n            handleLogout={handleLogout}\n            handleLogin={handleLogin}\n          />\n        </Route>\n\n        <Route path=\"/add-album\">\n          <AlbumCreate\n            user={user}\n            handleLogout={handleLogout}\n            handleAlbumCreate={handleAlbumCreate}\n          />\n        </Route>\n        <Route path=\"/albums/:id/edit\">\n          <AlbumEdit\n            user={user}\n            albums={albums}\n            handleAlbumUpdate={handleAlbumUpdate}\n            handleLogout={handleLogout}\n            handleAlbumDelete={handleAlbumDelete}\n          />\n        </Route>\n\n        <Route path=\"/albums/:id\">\n          <AlbumDetail user={user} handleLogout={handleLogout} />\n        </Route>\n        <Route path=\"/albums\">\n          <Albums user={user} handleLogout={handleLogout} albums={albums} />\n        </Route>\n\n        <Route path=\"/\">\n          <Home user={user} handleLogout={handleLogout} />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}